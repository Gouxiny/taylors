(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56d195a3","chunk-2d237d31","chunk-2d20e7a9"],{"33eb":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"button-box clearflex"},[r("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("新增用户")])],1),t._v(" "),r("el-table",{attrs:{data:t.tableData,border:"",stripe:""}},[r("el-table-column",{attrs:{label:"头像","min-width":"50"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("div",{style:{textAlign:"center"}},[r("img",{attrs:{src:t.row.headerImg,height:"35",width:"35"}})])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"uuid","min-width":"250",prop:"uuid"}}),t._v(" "),r("el-table-column",{attrs:{label:"用户名","min-width":"150",prop:"userName"}}),t._v(" "),r("el-table-column",{attrs:{label:"昵称","min-width":"150",prop:"nickName"}}),t._v(" "),r("el-table-column",{attrs:{label:"用户角色","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-cascader",{attrs:{options:t.authOptions,"show-all-levels":!1,props:{checkStrictly:!0,label:"authorityName",value:"authorityId",disabled:"disabled",emitPath:!1},filterable:""},on:{change:function(r){return t.changeAuthority(e.row)}},model:{value:e.row.authority.authorityId,callback:function(r){t.$set(e.row.authority,"authorityId",r)},expression:"scope.row.authority.authorityId"}})]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.row.visible,callback:function(r){t.$set(e.row,"visible",r)},expression:"scope.row.visible"}},[r("p",[t._v("确定要删除此用户吗")]),t._v(" "),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.row.visible=!1}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return t.deleteUser(e.row)}}},[t._v("确定")])],1),t._v(" "),r("el-button",{attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[t._v("删除")])],1)]}}])})],1),t._v(" "),r("el-pagination",{style:{float:"right",padding:"20px"},attrs:{"current-page":t.page,"page-size":t.pageSize,"page-sizes":[10,30,50,100],total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}}),t._v(" "),r("el-dialog",{attrs:{visible:t.addUserDialog,"custom-class":"user-dialog",title:"新增用户"},on:{"update:visible":function(e){t.addUserDialog=e}}},[r("el-form",{ref:"userForm",attrs:{rules:t.rules,model:t.userInfo}},[r("el-form-item",{attrs:{label:"用户名","label-width":"80px",prop:"username"}},[r("el-input",{model:{value:t.userInfo.username,callback:function(e){t.$set(t.userInfo,"username",e)},expression:"userInfo.username"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"密码","label-width":"80px",prop:"password"}},[r("el-input",{model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"别名","label-width":"80px",prop:"nickName"}},[r("el-input",{model:{value:t.userInfo.nickName,callback:function(e){t.$set(t.userInfo,"nickName",e)},expression:"userInfo.nickName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"头像","label-width":"80px"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{headers:{"x-token":t.token},"on-success":t.handleAvatarSuccess,"show-file-list":!1,action:t.path+"/fileUploadAndDownload/upload?noSave=1",name:"file"}},[t.userInfo.headerImg?r("img",{staticClass:"avatar",attrs:{src:t.userInfo.headerImg}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),r("el-form-item",{attrs:{label:"用户角色","label-width":"80px",prop:"authorityId"}},[r("el-cascader",{attrs:{options:t.authOptions,"show-all-levels":!1,props:{checkStrictly:!0,label:"authorityName",value:"authorityId",disabled:"disabled",emitPath:!1},filterable:""},on:{change:function(e){return t.changeAuthority(t.scope.row)}},model:{value:t.userInfo.authorityId,callback:function(e){t.$set(t.userInfo,"authorityId",e)},expression:"userInfo.authorityId"}})],1)],1),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.closeAddUserDialog}},[t._v("取 消")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.enterAddUserDialog}},[t._v("确 定")])],1)],1)],1)},n=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("96cf"),r("1da1")),o=r("ade3"),s=r("c24f"),u=r("fd85"),l=r("b016"),c=r("2f62");function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(o["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var p="",f={name:"Api",mixins:[l["default"]],data:function(){return{listApi:s["getUserList"],path:p,authOptions:[],addUserDialog:!1,userInfo:{username:"",password:"",nickName:"",headerImg:"",authorityId:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"}],nickName:[{required:!0,message:"请输入用户昵称",trigger:"blur"}],authorityId:[{required:!0,message:"请选择用户角色",trigger:"blur"}]}}},computed:h({},Object(c["c"])("user",["token"])),methods:{setOptions:function(t){this.authOptions=[],this.setAuthorityOptions(t,this.authOptions)},setAuthorityOptions:function(t,e){var r=this;t&&t.map((function(t){if(t.children&&t.children.length){var a={authorityId:t.authorityId,authorityName:t.authorityName,children:[]};r.setAuthorityOptions(t.children,a.children),e.push(a)}else{var n={authorityId:t.authorityId,authorityName:t.authorityName};e.push(n)}}))},deleteUser:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["deleteUser"])({id:e.ID});case 2:r=t.sent,0==r.code&&(this.getTableData(),e.visible=!1);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),enterAddUserDialog:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$refs.userForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=8;break}return t.next=3,Object(s["register"])(e.userInfo);case 3:return a=t.sent,0==a.code&&e.$message({type:"success",message:"创建成功"}),t.next=7,e.getTableData();case 7:e.closeAddUserDialog();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeAddUserDialog:function(){this.$refs.userForm.resetFields(),this.addUserDialog=!1},handleAvatarSuccess:function(t){this.userInfo.headerImg=t.data.file.url},addUser:function(){this.addUserDialog=!0},changeAuthority:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["setUserAuthority"])({uuid:e.uuid,authorityId:e.authority.authorityId});case 2:r=t.sent,0==r.code&&this.$message({type:"success",message:"角色设置成功"});case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.getTableData(),t.next=3,Object(u["getAuthorityList"])({page:1,pageSize:999});case 3:e=t.sent,this.setOptions(e.data.list);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},b=f,m=(r("ada4"),r("2877")),g=Object(m["a"])(b,a,n,!1,null,"7252f052",null);e["default"]=g.exports},3459:function(t,e,r){},ada4:function(t,e,r){"use strict";var a=r("3459"),n=r.n(a);n.a},b016:function(t,e,r){"use strict";r.r(e);r("8e6e"),r("ac6a"),r("456d");var a=r("ade3"),n=(r("96cf"),r("1da1"));function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){Object(a["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e["default"]={data:function(){return{page:1,total:10,pageSize:10,tableData:[],searchInfo:{}}},methods:{handleSizeChange:function(t){this.pageSize=t,this.getTableData()},handleCurrentChange:function(t){this.page=t,this.getTableData()},getTableData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,r,a,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:this.page,r=n.length>1&&void 0!==n[1]?n[1]:this.pageSize,t.next=4,this.listApi(o({page:e,pageSize:r},this.searchInfo));case 4:a=t.sent,this.tableData=a.data.list,this.total=a.data.total,this.page=a.data.page,this.pageSize=a.data.pageSize;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}}},fd85:function(t,e,r){"use strict";r.r(e),r.d(e,"getAuthorityList",(function(){return n})),r.d(e,"deleteAuthority",(function(){return i})),r.d(e,"createAuthority",(function(){return o})),r.d(e,"copyAuthority",(function(){return s})),r.d(e,"setDataAuthority",(function(){return u})),r.d(e,"updateAuthority",(function(){return l}));var a=r("b775"),n=function(t){return Object(a["default"])({url:"/authority/getAuthorityList",method:"post",data:t})},i=function(t){return Object(a["default"])({url:"/authority/deleteAuthority",method:"post",data:t})},o=function(t){return Object(a["default"])({url:"/authority/createAuthority",method:"post",data:t})},s=function(t){return Object(a["default"])({url:"/authority/copyAuthority",method:"post",data:t})},u=function(t){return Object(a["default"])({url:"/authority/setDataAuthority",method:"post",data:t})},l=function(t){return Object(a["default"])({url:"/authority/updateAuthority",method:"put",data:t})}}}]);